import{A as D,B,C as T,D as k,E as P,F as m,G as a,H as l,M as V,N as q,O as L,P as E,Q as R,S as z,T as y,U as F,V as A,W as G,Y as H,Z as J,a as r,b as f,c as j,d as $,ea as S,g as U,j as w,l as M,o as O,q as N,w as h,x as C,y as Q,z as v}from"./chunk-XTGLEH23.js";var g=(()=>{var u,c,i,e,s;let n=class n{constructor(){f(this,u,new Map);f(this,c,0);f(this,i,[]);f(this,e,[]);f(this,s,new U(r(this,e)))}addUser(){let o=r(this,i).pop()??++$(this,c)._,p=new U({id:o,active:!1});return r(this,u).set(o,{activity$:p}),r(this,e).push(p),r(this,s).next(r(this,e)),o}delUser(o){r(this,u).delete(o),j(this,e,[...r(this,u).values()].map(p=>p.activity$)),r(this,s).next(r(this,e))}setUserActivity(o,p){let b=r(this,u).get(o);b&&O(p.pipe(w(()=>({id:o,active:!0}))),p.pipe(N(5e3),w(()=>({id:o,active:!1})))).subscribe(b.activity$)}getUsersActivity(){return r(this,s)}};u=new WeakMap,c=new WeakMap,i=new WeakMap,e=new WeakMap,s=new WeakMap,n.\u0275fac=function(p){return new(p||n)},n.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var x=(()=>{let u=class u{constructor(i){this.server=i,this.userId=this.server.addUser()}getUserId(){return this.userId}ngOnDestroy(){this.server.delUser(this.userId)}setActivity(i){this.server.setUserActivity(this.userId,i)}getUsersActivity(){return this.server.getUsersActivity()}};u.\u0275fac=function(e){return new(e||u)(Q(g))},u.\u0275prov=h({token:u,factory:u.\u0275fac,providedIn:"root"});let t=u;return t})();var Z=["chattextinput"];function _(t,u){if(t&1&&(m(0,"li"),E(1),F(2,"async"),F(3,"async"),a()),t&2){let c,i=u.$implicit;B(),z(" User-",(c=A(2,2,i))==null?null:c.id," ",(c=A(3,4,i))==null?null:c.active," ")}}var K=(()=>{let u=class u{constructor(i){this.usersChat=i}ngOnInit(){this.username=`User-${this.usersChat.getUserId()}`,this.usersActivity$=this.usersChat.getUsersActivity()}ngAfterViewInit(){this.usersChat.setActivity(M(this.chattextinput.nativeElement,"input"))}ngOnDestroy(){}};u.\u0275fac=function(e){return new(e||u)(T(x))},u.\u0275cmp=v({type:u,selectors:[["app-users-chat"]],viewQuery:function(e,s){if(e&1&&V(Z,5),e&2){let n;q(n=L())&&(s.chattextinput=n.first)}},features:[y([x])],decls:8,vars:4,consts:[["chattextinput",""],[1,"container"],[1,"username"],[1,"users"],[4,"ngFor","ngForOf"]],template:function(e,s){e&1&&(m(0,"div",1)(1,"div",2),E(2),a(),m(3,"ul",3),k(4,_,4,6,"li",4),F(5,"async"),a(),l(6,"textarea",null,0),a()),e&2&&(B(2),R(s.username),B(2),P("ngForOf",A(5,2,s.usersActivity$)))},dependencies:[G,H]});let t=u;return t})();var I=(()=>{let u=class u{};u.\u0275fac=function(e){return new(e||u)},u.\u0275cmp=v({type:u,selectors:[["app-task-5"]],features:[y([g])],decls:16,vars:0,template:function(e,s){e&1&&(m(0,"h2"),E(1,"\u041C\u043E\u043D\u0438\u0442\u043E\u0440\u0438\u043D\u0433 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u0438 \u0432 \u0447\u0430\u0442\u0435"),a(),m(2,"p"),E(3,"\u0412\u0430\u043C \u043F\u0440\u0435\u0434\u0441\u0442\u043E\u0438\u0442 \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u043C\u0435\u0445\u0430\u043D\u0438\u0437\u043C \u043C\u043E\u043D\u0438\u0442\u043E\u0440\u0438\u043D\u0433\u0430 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 \u0432 \u0447\u0430\u0442\u0435. \u0426\u0435\u043B\u044C - \u0432\u044B\u0432\u043E\u0434\u0438\u0442\u044C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u043E \u0442\u043E\u043C, \u043A\u043E\u0433\u0434\u0430 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 \u0430\u043A\u0442\u0438\u0432\u043D\u044B \u0438 \u043D\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u044B."),l(4,"br"),E(5,`\u0412\u044B \u0434\u043E\u043B\u0436\u043D\u044B \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u043A\u043E\u0442\u043E\u0440\u0430\u044F \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0442\u044C \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 \u0432 \u0447\u0430\u0442\u0435. \u041A\u043E\u0433\u0434\u0430 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043D\u0430\u0447\u0438\u043D\u0430\u0435\u0442 \u043F\u0435\u0447\u0430\u0442\u0430\u0442\u044C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435, \u0435\u0433\u043E \u0441\u0442\u0430\u0442\u0443\u0441 \u0434\u043E\u043B\u0436\u0435\u043D \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C\u0441\u044F \u043D\u0430 "\u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439", \u0430 \u0435\u0441\u043B\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043D\u0435 \u043F\u0440\u043E\u044F\u0432\u043B\u044F\u0435\u0442 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C \u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435 5 \u043C\u0438\u043D\u0443\u0442, \u0435\u0433\u043E \u0441\u0442\u0430\u0442\u0443\u0441 \u0434\u043E\u043B\u0436\u0435\u043D \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C\u0441\u044F \u043D\u0430 "\u043D\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439".
`),l(6,"br"),E(7,"\u0412\u0430\u043C \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0438 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u0442\u043E\u043A\u0438 \u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 \u0438 \u0438\u0445 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u0438. \u041F\u043E\u0441\u043B\u0435 \u044D\u0442\u043E\u0433\u043E \u0432\u044B \u0434\u043E\u043B\u0436\u043D\u044B \u043F\u0440\u0435\u043E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u0442\u044C \u044D\u0442\u0438 \u043F\u043E\u0442\u043E\u043A\u0438, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u043E \u0441\u0442\u0430\u0442\u0443\u0441\u0435 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 \u0432 \u0443\u0434\u043E\u0431\u043D\u043E\u043C \u0444\u043E\u0440\u043C\u0430\u0442\u0435 \u0438 \u0432\u044B\u0432\u0435\u0441\u0442\u0438 \u044D\u0442\u0438 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u0432 \u043A\u043E\u043D\u0441\u043E\u043B\u044C."),a(),l(8,"hr"),m(9,"h3")(10,"em"),E(11,"See console to view results"),a()(),m(12,"div"),l(13,"app-users-chat")(14,"app-users-chat")(15,"app-users-chat"),a())},dependencies:[K]});let t=u;return t})();var t4=[{path:"",component:I}],W=(()=>{let u=class u{};u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=D({type:u}),u.\u0275inj=C({imports:[S.forChild(t4),S]});let t=u;return t})();var C4=(()=>{let u=class u{};u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=D({type:u,bootstrap:[I]}),u.\u0275inj=C({imports:[J,W]});let t=u;return t})();export{C4 as Task5Module};
