import{e as k,f as N,j as G}from"./chunk-XTGLEH23.js";function g(e){switch(e.responseType){case"json":return"response"in e?e.response:JSON.parse(e.responseText);case"document":return e.responseXML;case"text":default:return"response"in e?e.response:e.responseText}}var A=class{constructor(t,n,c,d="download_load"){this.originalEvent=t,this.xhr=n,this.request=c,this.type=d;let{status:u,responseType:y}=n;this.status=u??0,this.responseType=y??"";let m=n.getAllResponseHeaders();this.responseHeaders=m?m.split(`
`).reduce((x,E)=>{let w=E.indexOf(": ");return x[E.slice(0,w)]=E.slice(w+2),x},{}):{},this.response=g(n);let{loaded:l,total:p}=t;this.loaded=l,this.total=p}};var R=k(e=>function(n,c,d){this.message=n,this.name="AjaxError",this.xhr=c,this.request=d,this.status=c.status,this.responseType=c.responseType;let u;try{u=g(c)}catch{u=c.responseText}this.response=u}),F=(()=>{function e(t,n){return R.call(this,"ajax timeout",t,n),this.name="AjaxTimeoutError",this}return e.prototype=Object.create(R.prototype),e})();function I(e,t){return v({method:"GET",url:e,headers:t})}function V(e,t,n){return v({method:"POST",url:e,body:t,headers:n})}function z(e,t){return v({method:"DELETE",url:e,headers:t})}function W(e,t,n){return v({method:"PUT",url:e,body:t,headers:n})}function K(e,t,n){return v({method:"PATCH",url:e,body:t,headers:n})}var Q=G(e=>e.response);function Y(e,t){return Q(v({method:"GET",url:e,headers:t}))}var v=(()=>{let e=t=>ee(typeof t=="string"?{url:t}:t);return e.get=I,e.post=V,e.delete=z,e.put=W,e.patch=K,e.getJSON=Y,e})(),Z="upload",J="download",H="loadstart",O="progress",M="load";function ee(e){return new N(t=>{var n,c;let d=Object.assign({async:!0,crossDomain:!1,withCredentials:!1,method:"GET",timeout:0,responseType:"json"},e),{queryParams:u,body:y,headers:m}=d,l=d.url;if(!l)throw new TypeError("url is required");if(u){let r;if(l.includes("?")){let j=l.split("?");if(2<j.length)throw new TypeError("invalid url");r=new URLSearchParams(j[1]),new URLSearchParams(u).forEach((L,T)=>r.set(T,L)),l=j[0]+"?"+r}else r=new URLSearchParams(u),l=l+"?"+r}let p={};if(m)for(let r in m)m.hasOwnProperty(r)&&(p[r.toLowerCase()]=m[r]);let x=d.crossDomain;!x&&!("x-requested-with"in p)&&(p["x-requested-with"]="XMLHttpRequest");let{withCredentials:E,xsrfCookieName:w,xsrfHeaderName:D}=d;if((E||!x)&&w&&D){let r=(c=(n=document?.cookie.match(new RegExp(`(^|;\\s*)(${w})=([^;]*)`)))===null||n===void 0?void 0:n.pop())!==null&&c!==void 0?c:"";r&&(p[D]=r)}let S=re(y,p),f=Object.assign(Object.assign({},d),{url:l,headers:p,body:S}),o;o=e.createXHR?e.createXHR():new XMLHttpRequest;{let{progressSubscriber:r,includeDownloadProgress:j=!1,includeUploadProgress:L=!1}=e,T=(s,a)=>{o.addEventListener(s,()=>{var i;let h=a();(i=r?.error)===null||i===void 0||i.call(r,h),t.error(h)})};T("timeout",()=>new F(o,f)),T("abort",()=>new R("aborted",o,f));let q=(s,a)=>new A(a,o,f,`${s}_${a.type}`),C=(s,a,i)=>{s.addEventListener(a,h=>{t.next(q(i,h))})};L&&[H,O,M].forEach(s=>C(o.upload,s,Z)),r&&[H,O].forEach(s=>o.upload.addEventListener(s,a=>{var i;return(i=r?.next)===null||i===void 0?void 0:i.call(r,a)})),j&&[H,O].forEach(s=>C(o,s,J));let U=s=>{let a="ajax error"+(s?" "+s:"");t.error(new R(a,o,f))};o.addEventListener("error",s=>{var a;(a=r?.error)===null||a===void 0||a.call(r,s),U()}),o.addEventListener(M,s=>{var a,i;let{status:h}=o;if(h<400){(a=r?.complete)===null||a===void 0||a.call(r);let B;try{B=q(J,s)}catch($){t.error($);return}t.next(B),t.complete()}else(i=r?.error)===null||i===void 0||i.call(r,s),U(h)})}let{user:_,method:X,async:P}=f;_?o.open(X,l,P,_,f.password):o.open(X,l,P),P&&(o.timeout=f.timeout,o.responseType=f.responseType),"withCredentials"in o&&(o.withCredentials=f.withCredentials);for(let r in p)p.hasOwnProperty(r)&&o.setRequestHeader(r,p[r]);return S?o.send(S):o.send(),()=>{o&&o.readyState!==4&&o.abort()}})}function re(e,t){var n;if(!e||typeof e=="string"||ie(e)||ce(e)||oe(e)||ne(e)||se(e)||ue(e))return e;if(ae(e))return e.buffer;if(typeof e=="object")return t["content-type"]=(n=t["content-type"])!==null&&n!==void 0?n:"application/json;charset=utf-8",JSON.stringify(e);throw new TypeError("Unknown body type")}var te=Object.prototype.toString;function b(e,t){return te.call(e)===`[object ${t}]`}function oe(e){return b(e,"ArrayBuffer")}function ne(e){return b(e,"File")}function se(e){return b(e,"Blob")}function ae(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e)}function ie(e){return typeof FormData<"u"&&e instanceof FormData}function ce(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function ue(e){return typeof ReadableStream<"u"&&e instanceof ReadableStream}export{v as a};
